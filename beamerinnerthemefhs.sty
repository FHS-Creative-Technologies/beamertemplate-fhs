\mode<presentation>

\RequirePackage{graphicx}
\usetikzlibrary{calc, positioning}

\setbeamertemplate{itemize items}[circle]

\setbeamertemplate{title page}{
  \begin{tikzpicture}[remember picture, overlay, every node/.style={inner sep=0,outer sep=0}]
    \node (fhslogobackground) at (current page.south west) [anchor=south west] {\includegraphics[height=\paperheight, width=!]{logo-fhs-background.pdf}};
    \node (fhslogotitlepage) at ($(current page.north west) + (.62\paperwidth, -.082\paperheight)$) [anchor=north west] {\includegraphics[width=.1\paperwidth, height=!]{logo-fhs.pdf}};
    \coordinate (fhslogotitlepagetextcoordy) at ($(current page.south west) + (0, .082\paperheight)$);
    \node (fhslogotitlepagetext) at (fhslogotitlepage |- fhslogotitlepagetextcoordy) [anchor=south] {\includegraphics[width=.1\paperwidth, height=!]{logo-fhs-tgm.pdf}};

    \node (titlenode) at ($(current page.north west) + (.08\paperwidth, -.346\paperheight)$) [anchor=north west, align=left, text width=.7\paperwidth] {\ifx\inserttitle\@empty\else\usebeamertemplate*{title}\fi};
    \node (subtitlenode) [below of=titlenode, text width=.7\paperwidth]{\ifx\insertsubtitle\@empty\else\usebeamertemplate*{subtitle}\fi};
  \end{tikzpicture}
}

\setbeamertemplate{title}{
  \raggedright%
  \inserttitle%
}

\setbeamertemplate{subtitle}{
  \raggedright%
  \insertsubtitle%
}

% prevent the per-slide logo from appering at the title page
\def\maketitle{%
  \ifbeamer@inframe
    \titlepage
  \else
    \frame[plain,noframenumbering]{\titlepage}
  \fi
}
\def\titlepage{%
  \usebeamertemplate{title page}
}

\define@key{beamerframe}{c}[true]{% centered
  \beamer@frametopskip=0pt plus 1fill\relax%
  \beamer@framebottomskip=0pt plus 1fill\relax%
  \beamer@frametopskipautobreak=0pt plus .4\paperheight\relax%
  \beamer@framebottomskipautobreak=0pt plus .6\paperheight\relax%
  \def\beamer@initfirstlineunskip{}%
}

\providebool{fhs@standout}
\define@key{beamerframe}{standout}[true]{%
  \booltrue{fhs@standout}
  \begingroup
    \setkeys{beamerframe}{c}
    \setkeys{beamerframe}{plain}
    \setkeys{beamerframe}{noframenumbering}
    \setbeamercolor{background canvas}{
      use=palette primary,
      bg=palette primary.bg
    }
    \setbeamercolor{local structure}{
      fg=palette primary.fg
    }
    \usebeamercolor[fg]{palette primary}
}

\pretocmd{\beamer@reseteecodes}{%
\ifbool{fhs@standout}{
  \endgroup
  \boolfalse{fhs@standout}
}{}
}{}{}

\AtBeginEnvironment{beamer@frameslide}{
  \ifbool{fhs@standout}{
    \centering
    \usebeamerfont{standout}
  }{}
}

\mode<all>
